# .env.example - Configuration TIBOK

# OpenAI Configuration
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_MODEL=gpt-3.5-turbo

# Security
ALLOWED_ORIGINS=https://tibok.mu,https://www.tibok.mu,http://localhost:3000
NODE_ENV=production

# Rate Limiting (optionnel - pour Redis)
REDIS_URL=redis://localhost:6379
RATE_LIMIT_WINDOW=60000
MAX_REQUESTS_PER_WINDOW=10

# Monitoring (optionnel)
SENTRY_DSN=https://your-sentry-dsn
ANALYTICS_ID=G-XXXXXXXXXX

# Feature Flags
ENABLE_CACHE=true
ENABLE_RATE_LIMIT=true
ENABLE_EMERGENCY_DETECTION=true

---

# package.json - Dépendances mises à jour
{
  "name": "tibok-vercel",
  "version": "2.0.0",
  "private": true,
  "scripts": {
    "dev": "vercel dev",
    "deploy": "vercel --prod",
    "test": "jest",
    "lint": "eslint api/*.js"
  },
  "dependencies": {
    "openai": "^4.0.0"
  },
  "devDependencies": {
    "@vercel/node": "^3.0.0",
    "eslint": "^8.0.0",
    "jest": "^29.0.0",
    "vercel": "^32.0.0"
  }
}

---

# vercel.json - Configuration optimisée
{
  "functions": {
    "api/chat.js": {
      "maxDuration": 30,
      "memory": 1024
    }
  },
  "headers": [
    {
      "source": "/api/(.*)",
      "headers": [
        {
          "key": "X-Content-Type-Options",
          "value": "nosniff"
        },
        {
          "key": "X-Frame-Options",
          "value": "DENY"
        },
        {
          "key": "X-XSS-Protection",
          "value": "1; mode=block"
        },
        {
          "key": "Referrer-Policy",
          "value": "strict-origin-when-cross-origin"
        }
      ]
    }
  ],
  "rewrites": [
    {
      "source": "/widget.js",
      "destination": "/public/widget.html"
    }
  ]
}
